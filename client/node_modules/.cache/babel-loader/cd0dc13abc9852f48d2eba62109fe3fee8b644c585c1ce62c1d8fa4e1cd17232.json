{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\YaaSa\\\\OneDrive - Institut Teccart\\\\Documents\\\\s6_projects\\\\SchoolBag\\\\client\\\\src\\\\components\\\\tasks\\\\TaskDetailModal.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { X, Save, Calendar, Clock, Book, AlertCircle, FileText, Edit3, Eye, Plus } from 'lucide-react';\nimport { format } from 'date-fns';\nimport { useTask } from '../../context/TaskContext';\nimport './TaskDetailModal.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst TaskDetailModal = ({\n  task,\n  onClose,\n  onTaskSaved,\n  initialTab = 'details'\n}) => {\n  _s();\n  const {\n    createTask,\n    updateTask,\n    loading\n  } = useTask();\n  const [activeTab, setActiveTab] = useState(initialTab);\n  const [formData, setFormData] = useState({\n    title: '',\n    description: '',\n    subject: '',\n    type: 'assignment',\n    priority: 'medium',\n    status: 'pending',\n    dueDate: '',\n    dueTime: '23:59',\n    estimatedHours: 1\n  });\n  const [errors, setErrors] = useState({});\n  const [notes, setNotes] = useState([]);\n  const [selectedNote, setSelectedNote] = useState(null);\n  const [noteFormVisible, setNoteFormVisible] = useState(false);\n  const [noteFormData, setNoteFormData] = useState({\n    title: '',\n    content: '',\n    template: 'blank'\n  });\n  const [lastSyncTime, setLastSyncTime] = useState(null);\n  const [syncInterval, setSyncInterval] = useState(null);\n\n  // Note templates\n  const noteTemplates = [{\n    id: 'blank',\n    name: 'Blank Page',\n    description: 'Start with a blank note'\n  }, {\n    id: 'exam_revision',\n    name: 'Exam Revision',\n    description: 'Structured template for exam preparation'\n  }, {\n    id: 'lab_report',\n    name: 'Lab Report',\n    description: 'Complete lab report template'\n  }, {\n    id: 'reading_summary',\n    name: 'Reading Summary',\n    description: 'Template for summarizing readings'\n  }, {\n    id: 'essay_outline',\n    name: 'Essay Outline',\n    description: 'Comprehensive essay outline structure'\n  }];\n  useEffect(() => {\n    if (task) {\n      setFormData({\n        title: task.title,\n        description: task.description || '',\n        subject: task.subject,\n        type: task.type,\n        priority: task.priority,\n        status: task.status,\n        dueDate: format(new Date(task.dueDate), 'yyyy-MM-dd'),\n        dueTime: task.dueTime,\n        estimatedHours: task.estimatedHours\n      });\n\n      // Fetch notes for this task\n      fetchTaskNotes();\n\n      // Start periodic sync for notes\n      startNotesSync();\n    }\n\n    // Cleanup sync on unmount or task change\n    return () => {\n      stopNotesSync();\n    };\n  }, [task]);\n  const fetchTaskNotes = async () => {\n    if (!task) return;\n    try {\n      const token = localStorage.getItem('token');\n      const response = await fetch(`/api/notes/task/${task._id}`, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      if (response.ok) {\n        const data = await response.json();\n        setNotes(data.data);\n        setLastSyncTime(new Date().toISOString());\n      }\n    } catch (error) {\n      console.error('Error fetching task notes:', error);\n    }\n  };\n\n  // Start periodic sync for notes\n  const startNotesSync = () => {\n    if (syncInterval) {\n      clearInterval(syncInterval);\n    }\n    const interval = setInterval(async () => {\n      try {\n        await syncNotesInBackground();\n      } catch (error) {\n        console.error('Background notes sync failed:', error);\n      }\n    }, 30000); // 30 seconds\n\n    setSyncInterval(interval);\n  };\n\n  // Stop periodic sync\n  const stopNotesSync = () => {\n    if (syncInterval) {\n      clearInterval(syncInterval);\n      setSyncInterval(null);\n    }\n  };\n\n  // Background sync for notes updates\n  const syncNotesInBackground = async () => {\n    if (!task || !lastSyncTime) return;\n    try {\n      const token = localStorage.getItem('token');\n      const response = await fetch(`/api/notes/task/${task._id}?since=${encodeURIComponent(lastSyncTime)}`, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      if (response.ok) {\n        const data = await response.json();\n        const latestNotes = data.data || [];\n        if (latestNotes.length > 0) {\n          // Merge latest notes with existing ones\n          setNotes(prev => {\n            const noteMap = new Map(prev.map(note => [note._id, note]));\n            latestNotes.forEach(note => {\n              noteMap.set(note._id, note);\n            });\n            return Array.from(noteMap.values()).sort((a, b) => new Date(b.updatedAt) - new Date(a.updatedAt));\n          });\n\n          // Update selected note if it was modified\n          if (selectedNote) {\n            const updatedSelectedNote = latestNotes.find(note => note._id === selectedNote._id);\n            if (updatedSelectedNote) {\n              setSelectedNote(updatedSelectedNote);\n            }\n          }\n          setLastSyncTime(new Date().toISOString());\n        }\n      }\n    } catch (error) {\n      // Silently fail background sync to avoid disrupting user experience\n      console.warn('Background notes sync failed:', error.message);\n    }\n  };\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n    if (errors[name]) {\n      setErrors(prev => ({\n        ...prev,\n        [name]: ''\n      }));\n    }\n  };\n  const validateForm = () => {\n    const newErrors = {};\n    if (!formData.title.trim()) {\n      newErrors.title = 'Title is required';\n    }\n    if (!formData.subject.trim()) {\n      newErrors.subject = 'Subject is required';\n    }\n    if (!formData.dueDate) {\n      newErrors.dueDate = 'Due date is required';\n    } else {\n      const selectedDate = new Date(formData.dueDate);\n      const today = new Date();\n      today.setHours(0, 0, 0, 0);\n      if (selectedDate < today) {\n        newErrors.dueDate = 'Due date cannot be in the past';\n      }\n    }\n    if (formData.estimatedHours < 0.5 || formData.estimatedHours > 100) {\n      newErrors.estimatedHours = 'Estimated hours must be between 0.5 and 100';\n    }\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!validateForm()) {\n      return;\n    }\n    const taskData = {\n      ...formData,\n      dueDate: new Date(formData.dueDate).toISOString(),\n      estimatedHours: parseFloat(formData.estimatedHours)\n    };\n    let result;\n    if (task) {\n      result = await updateTask(task._id, taskData);\n    } else {\n      result = await createTask(taskData);\n    }\n    if (result.success) {\n      onTaskSaved();\n    }\n  };\n  const handleCreateNote = async () => {\n    if (!task || !noteFormData.title.trim()) return;\n    try {\n      const token = localStorage.getItem('token');\n      const response = await fetch('/api/notes', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          taskId: task._id,\n          template: noteFormData.template,\n          title: noteFormData.title,\n          content: noteFormData.content\n        })\n      });\n      if (response.ok) {\n        const data = await response.json();\n        setNotes(prev => [data.data, ...prev]);\n        setNoteFormVisible(false);\n        setNoteFormData({\n          title: '',\n          content: '',\n          template: 'blank'\n        });\n        setSelectedNote(data.data);\n        setLastSyncTime(new Date().toISOString());\n      }\n    } catch (error) {\n      console.error('Error creating note:', error);\n    }\n  };\n  const handleUpdateNote = async (noteId, updatedData) => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await fetch(`/api/notes/${noteId}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify(updatedData)\n      });\n      if (response.ok) {\n        const data = await response.json();\n        setNotes(prev => prev.map(note => note._id === noteId ? data.data : note));\n        setSelectedNote(data.data);\n        setLastSyncTime(new Date().toISOString());\n      }\n    } catch (error) {\n      console.error('Error updating note:', error);\n    }\n  };\n  const handleDeleteNote = async noteId => {\n    if (!window.confirm('Are you sure you want to delete this note?')) return;\n    try {\n      const token = localStorage.getItem('token');\n      const response = await fetch(`/api/notes/${noteId}`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      if (response.ok) {\n        setNotes(prev => prev.filter(note => note._id !== noteId));\n        if (selectedNote && selectedNote._id === noteId) {\n          setSelectedNote(null);\n        }\n        setLastSyncTime(new Date().toISOString());\n      }\n    } catch (error) {\n      console.error('Error deleting note:', error);\n    }\n  };\n  const renderDetailsTab = () => /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"task-form\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-label\",\n        children: [/*#__PURE__*/_jsxDEV(Book, {\n          size: 16\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 11\n        }, this), \"Task Title *\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"title\",\n        value: formData.title,\n        onChange: handleChange,\n        className: \"form-input\",\n        placeholder: \"Enter task title\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 9\n      }, this), errors.title && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-message\",\n        children: errors.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 26\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-label\",\n        children: \"Description\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        name: \"description\",\n        value: formData.description,\n        onChange: handleChange,\n        className: \"form-input\",\n        placeholder: \"Enter task description (optional)\",\n        rows: \"3\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-row\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label\",\n          children: \"Subject *\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"subject\",\n          value: formData.subject,\n          onChange: handleChange,\n          className: \"form-input\",\n          placeholder: \"e.g., Mathematics, History\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 11\n        }, this), errors.subject && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error-message\",\n          children: errors.subject\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 30\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label\",\n          children: \"Type\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"type\",\n          value: formData.type,\n          onChange: handleChange,\n          className: \"form-select\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"assignment\",\n            children: \"Assignment\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"exam\",\n            children: \"Exam\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"project\",\n            children: \"Project\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"reading\",\n            children: \"Reading\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 368,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"other\",\n            children: \"Other\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 369,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-row\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label\",\n          children: \"Priority\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 376,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"priority\",\n          value: formData.priority,\n          onChange: handleChange,\n          className: \"form-select\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"low\",\n            children: \"Low\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 383,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"medium\",\n            children: \"Medium\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 384,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"high\",\n            children: \"High\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 385,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 377,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label\",\n          children: \"Status\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"status\",\n          value: formData.status,\n          onChange: handleChange,\n          className: \"form-select\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"pending\",\n            children: \"Pending\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 397,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"in-progress\",\n            children: \"In Progress\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 398,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"completed\",\n            children: \"Completed\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 399,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 374,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-row\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label\",\n          children: [/*#__PURE__*/_jsxDEV(Calendar, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 407,\n            columnNumber: 13\n          }, this), \"Due Date *\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"date\",\n          name: \"dueDate\",\n          value: formData.dueDate,\n          onChange: handleChange,\n          className: \"form-input\",\n          min: format(new Date(), 'yyyy-MM-dd')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 410,\n          columnNumber: 11\n        }, this), errors.dueDate && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error-message\",\n          children: errors.dueDate\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 418,\n          columnNumber: 30\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 405,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label\",\n          children: [/*#__PURE__*/_jsxDEV(Clock, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 423,\n            columnNumber: 13\n          }, this), \"Time\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"time\",\n          name: \"dueTime\",\n          value: formData.dueTime,\n          onChange: handleChange,\n          className: \"form-input\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 426,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 421,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label\",\n          children: \"Hours\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 436,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          name: \"estimatedHours\",\n          value: formData.estimatedHours,\n          onChange: handleChange,\n          className: \"form-input\",\n          min: \"0.5\",\n          max: \"100\",\n          step: \"0.5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 437,\n          columnNumber: 11\n        }, this), errors.estimatedHours && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error-message\",\n          children: errors.estimatedHours\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 447,\n          columnNumber: 37\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 435,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 404,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-actions\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-primary\",\n        disabled: loading,\n        children: [/*#__PURE__*/_jsxDEV(Save, {\n          size: 16\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 457,\n          columnNumber: 11\n        }, this), task ? 'Update Task' : 'Create Task']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 452,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: onClose,\n        className: \"btn btn-secondary\",\n        disabled: loading,\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 460,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 451,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 314,\n    columnNumber: 5\n  }, this);\n  const renderNotesTab = () => {\n    var _noteTemplates$find;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"notes-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"notes-sidebar\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"notes-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Notes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 476,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setNoteFormVisible(true),\n              className: \"btn btn-primary btn-sm\",\n              disabled: !task,\n              children: [/*#__PURE__*/_jsxDEV(Plus, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 483,\n                columnNumber: 15\n              }, this), \"Add Note\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 478,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 477,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 475,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"notes-list\",\n          children: notes.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"notes-empty\",\n            children: [/*#__PURE__*/_jsxDEV(FileText, {\n              size: 32\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 492,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"No notes yet\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 493,\n              columnNumber: 15\n            }, this), task && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setNoteFormVisible(true),\n              className: \"btn btn-outline\",\n              children: \"Create your first note\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 495,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 491,\n            columnNumber: 13\n          }, this) : notes.map(note => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `note-item ${(selectedNote === null || selectedNote === void 0 ? void 0 : selectedNote._id) === note._id ? 'active' : ''}`,\n            onClick: () => setSelectedNote(note),\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: note.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 510,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [note.content.substring(0, 100), \"...\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 511,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"note-date\",\n              children: format(new Date(note.updatedAt), 'MMM d, yyyy')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 512,\n              columnNumber: 17\n            }, this)]\n          }, note._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 505,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 489,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 474,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"notes-content\",\n        children: selectedNote ? /*#__PURE__*/_jsxDEV(NoteEditor, {\n          note: selectedNote,\n          onSave: handleUpdateNote,\n          onDelete: handleDeleteNote\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 523,\n          columnNumber: 11\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"notes-placeholder\",\n          children: [/*#__PURE__*/_jsxDEV(FileText, {\n            size: 48\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 530,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Select a note to view\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 531,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Choose a note from the sidebar to start reading or editing.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 532,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 529,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 521,\n        columnNumber: 7\n      }, this), noteFormVisible && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"note-form-modal\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"note-form-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"note-form-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Create New Note\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 542,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setNoteFormVisible(false),\n              children: /*#__PURE__*/_jsxDEV(X, {\n                size: 20\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 544,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 543,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 541,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"note-form-body\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Template\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 550,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                value: noteFormData.template,\n                onChange: e => setNoteFormData(prev => ({\n                  ...prev,\n                  template: e.target.value\n                })),\n                className: \"form-select\",\n                children: noteTemplates.map(template => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: template.id,\n                  children: template.name\n                }, template.id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 560,\n                  columnNumber: 21\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 551,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                children: (_noteTemplates$find = noteTemplates.find(t => t.id === noteFormData.template)) === null || _noteTemplates$find === void 0 ? void 0 : _noteTemplates$find.description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 565,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 549,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Note Title *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 571,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: noteFormData.title,\n                onChange: e => setNoteFormData(prev => ({\n                  ...prev,\n                  title: e.target.value\n                })),\n                className: \"form-input\",\n                placeholder: \"Enter note title\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 572,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 570,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"note-form-actions\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: handleCreateNote,\n                className: \"btn btn-primary\",\n                disabled: !noteFormData.title.trim(),\n                children: \"Create Note\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 585,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setNoteFormVisible(false),\n                className: \"btn btn-secondary\",\n                children: \"Cancel\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 592,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 584,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 548,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 540,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 539,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 473,\n      columnNumber: 5\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"task-detail-modal-overlay\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"task-detail-modal\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: task ? 'Task Details' : 'Create New Task'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 610,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClose,\n          className: \"close-button\",\n          children: /*#__PURE__*/_jsxDEV(X, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 612,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 611,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 609,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-tabs\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `tab-button ${activeTab === 'details' ? 'active' : ''}`,\n          onClick: () => setActiveTab('details'),\n          children: [/*#__PURE__*/_jsxDEV(Book, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 621,\n            columnNumber: 13\n          }, this), \"Details\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 617,\n          columnNumber: 11\n        }, this), task && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `tab-button ${activeTab === 'notes' ? 'active' : ''}`,\n          onClick: () => setActiveTab('notes'),\n          children: [/*#__PURE__*/_jsxDEV(FileText, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 629,\n            columnNumber: 15\n          }, this), \"Notes\", notes.length > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"tab-badge\",\n            children: notes.length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 632,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 625,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 616,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        children: activeTab === 'details' ? renderDetailsTab() : renderNotesTab()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 638,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 608,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 607,\n    columnNumber: 5\n  }, this);\n};\n\n// Simple Note Editor Component\n_s(TaskDetailModal, \"K4IBPLRSYhyPoLiGV0/QnSAZf3o=\", false, function () {\n  return [useTask];\n});\n_c = TaskDetailModal;\nconst NoteEditor = ({\n  note,\n  onSave,\n  onDelete\n}) => {\n  _s2();\n  const [isEditing, setIsEditing] = useState(false);\n  const [title, setTitle] = useState(note.title);\n  const [content, setContent] = useState(note.content);\n  const handleSave = () => {\n    onSave(note._id, {\n      title,\n      content\n    });\n    setIsEditing(false);\n  };\n  const handleCancel = () => {\n    setTitle(note.title);\n    setContent(note.content);\n    setIsEditing(false);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"note-editor\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"note-editor-header\",\n      children: [isEditing ? /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: title,\n        onChange: e => setTitle(e.target.value),\n        className: \"note-title-input\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 667,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: note.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 674,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"note-editor-actions\",\n        children: isEditing ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleSave,\n            className: \"btn btn-primary btn-sm\",\n            children: [/*#__PURE__*/_jsxDEV(Save, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 681,\n              columnNumber: 17\n            }, this), \"Save\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 680,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleCancel,\n            className: \"btn btn-secondary btn-sm\",\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 684,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setIsEditing(true),\n            className: \"btn btn-outline btn-sm\",\n            children: [/*#__PURE__*/_jsxDEV(Edit3, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 691,\n              columnNumber: 17\n            }, this), \"Edit\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 690,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => onDelete(note._id),\n            className: \"btn btn-danger btn-sm\",\n            children: [/*#__PURE__*/_jsxDEV(X, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 698,\n              columnNumber: 17\n            }, this), \"Delete\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 694,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 677,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 665,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"note-editor-content\",\n      children: isEditing ? /*#__PURE__*/_jsxDEV(\"textarea\", {\n        value: content,\n        onChange: e => setContent(e.target.value),\n        className: \"note-content-editor\",\n        rows: \"20\",\n        placeholder: \"Write your notes here... (Markdown supported)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 708,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"note-content-display\",\n        children: /*#__PURE__*/_jsxDEV(\"pre\", {\n          children: content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 717,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 716,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 706,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 664,\n    columnNumber: 5\n  }, this);\n};\n_s2(NoteEditor, \"7YiHrQEVJwE4VSuvsCFK0hGvFKA=\");\n_c2 = NoteEditor;\nexport default TaskDetailModal;\nvar _c, _c2;\n$RefreshReg$(_c, \"TaskDetailModal\");\n$RefreshReg$(_c2, \"NoteEditor\");","map":{"version":3,"names":["React","useState","useEffect","X","Save","Calendar","Clock","Book","AlertCircle","FileText","Edit3","Eye","Plus","format","useTask","jsxDEV","_jsxDEV","Fragment","_Fragment","TaskDetailModal","task","onClose","onTaskSaved","initialTab","_s","createTask","updateTask","loading","activeTab","setActiveTab","formData","setFormData","title","description","subject","type","priority","status","dueDate","dueTime","estimatedHours","errors","setErrors","notes","setNotes","selectedNote","setSelectedNote","noteFormVisible","setNoteFormVisible","noteFormData","setNoteFormData","content","template","lastSyncTime","setLastSyncTime","syncInterval","setSyncInterval","noteTemplates","id","name","Date","fetchTaskNotes","startNotesSync","stopNotesSync","token","localStorage","getItem","response","fetch","_id","headers","ok","data","json","toISOString","error","console","clearInterval","interval","setInterval","syncNotesInBackground","encodeURIComponent","latestNotes","length","prev","noteMap","Map","map","note","forEach","set","Array","from","values","sort","a","b","updatedAt","updatedSelectedNote","find","warn","message","handleChange","e","value","target","validateForm","newErrors","trim","selectedDate","today","setHours","Object","keys","handleSubmit","preventDefault","taskData","parseFloat","result","success","handleCreateNote","method","body","JSON","stringify","taskId","handleUpdateNote","noteId","updatedData","handleDeleteNote","window","confirm","filter","renderDetailsTab","onSubmit","className","children","size","fileName","_jsxFileName","lineNumber","columnNumber","onChange","placeholder","rows","min","max","step","disabled","onClick","renderNotesTab","_noteTemplates$find","substring","NoteEditor","onSave","onDelete","t","_c","_s2","isEditing","setIsEditing","setTitle","setContent","handleSave","handleCancel","_c2","$RefreshReg$"],"sources":["C:/Users/YaaSa/OneDrive - Institut Teccart/Documents/s6_projects/SchoolBag/client/src/components/tasks/TaskDetailModal.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { X, Save, Calendar, Clock, Book, AlertCircle, FileText, Edit3, Eye, Plus } from 'lucide-react';\r\nimport { format } from 'date-fns';\r\nimport { useTask } from '../../context/TaskContext';\r\nimport './TaskDetailModal.css';\r\n\r\nconst TaskDetailModal = ({ task, onClose, onTaskSaved, initialTab = 'details' }) => {\r\n  const { createTask, updateTask, loading } = useTask();\r\n  const [activeTab, setActiveTab] = useState(initialTab);\r\n  const [formData, setFormData] = useState({\r\n    title: '',\r\n    description: '',\r\n    subject: '',\r\n    type: 'assignment',\r\n    priority: 'medium',\r\n    status: 'pending',\r\n    dueDate: '',\r\n    dueTime: '23:59',\r\n    estimatedHours: 1\r\n  });\r\n  const [errors, setErrors] = useState({});\r\n  const [notes, setNotes] = useState([]);\r\n  const [selectedNote, setSelectedNote] = useState(null);\r\n  const [noteFormVisible, setNoteFormVisible] = useState(false);\r\n  const [noteFormData, setNoteFormData] = useState({\r\n    title: '',\r\n    content: '',\r\n    template: 'blank'\r\n  });\r\n  const [lastSyncTime, setLastSyncTime] = useState(null);\r\n  const [syncInterval, setSyncInterval] = useState(null);\r\n\r\n  // Note templates\r\n  const noteTemplates = [\r\n    { id: 'blank', name: 'Blank Page', description: 'Start with a blank note' },\r\n    { id: 'exam_revision', name: 'Exam Revision', description: 'Structured template for exam preparation' },\r\n    { id: 'lab_report', name: 'Lab Report', description: 'Complete lab report template' },\r\n    { id: 'reading_summary', name: 'Reading Summary', description: 'Template for summarizing readings' },\r\n    { id: 'essay_outline', name: 'Essay Outline', description: 'Comprehensive essay outline structure' }\r\n  ];\r\n\r\n  useEffect(() => {\r\n    if (task) {\r\n      setFormData({\r\n        title: task.title,\r\n        description: task.description || '',\r\n        subject: task.subject,\r\n        type: task.type,\r\n        priority: task.priority,\r\n        status: task.status,\r\n        dueDate: format(new Date(task.dueDate), 'yyyy-MM-dd'),\r\n        dueTime: task.dueTime,\r\n        estimatedHours: task.estimatedHours\r\n      });\r\n      \r\n      // Fetch notes for this task\r\n      fetchTaskNotes();\r\n      \r\n      // Start periodic sync for notes\r\n      startNotesSync();\r\n    }\r\n    \r\n    // Cleanup sync on unmount or task change\r\n    return () => {\r\n      stopNotesSync();\r\n    };\r\n  }, [task]);\r\n\r\n  const fetchTaskNotes = async () => {\r\n    if (!task) return;\r\n    \r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const response = await fetch(`/api/notes/task/${task._id}`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n      \r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setNotes(data.data);\r\n        setLastSyncTime(new Date().toISOString());\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching task notes:', error);\r\n    }\r\n  };\r\n\r\n  // Start periodic sync for notes\r\n  const startNotesSync = () => {\r\n    if (syncInterval) {\r\n      clearInterval(syncInterval);\r\n    }\r\n    \r\n    const interval = setInterval(async () => {\r\n      try {\r\n        await syncNotesInBackground();\r\n      } catch (error) {\r\n        console.error('Background notes sync failed:', error);\r\n      }\r\n    }, 30000); // 30 seconds\r\n    \r\n    setSyncInterval(interval);\r\n  };\r\n\r\n  // Stop periodic sync\r\n  const stopNotesSync = () => {\r\n    if (syncInterval) {\r\n      clearInterval(syncInterval);\r\n      setSyncInterval(null);\r\n    }\r\n  };\r\n\r\n  // Background sync for notes updates\r\n  const syncNotesInBackground = async () => {\r\n    if (!task || !lastSyncTime) return;\r\n    \r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const response = await fetch(`/api/notes/task/${task._id}?since=${encodeURIComponent(lastSyncTime)}`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n      \r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        const latestNotes = data.data || [];\r\n        \r\n        if (latestNotes.length > 0) {\r\n          // Merge latest notes with existing ones\r\n          setNotes(prev => {\r\n            const noteMap = new Map(prev.map(note => [note._id, note]));\r\n            \r\n            latestNotes.forEach(note => {\r\n              noteMap.set(note._id, note);\r\n            });\r\n            \r\n            return Array.from(noteMap.values()).sort((a, b) => \r\n              new Date(b.updatedAt) - new Date(a.updatedAt)\r\n            );\r\n          });\r\n          \r\n          // Update selected note if it was modified\r\n          if (selectedNote) {\r\n            const updatedSelectedNote = latestNotes.find(note => note._id === selectedNote._id);\r\n            if (updatedSelectedNote) {\r\n              setSelectedNote(updatedSelectedNote);\r\n            }\r\n          }\r\n          \r\n          setLastSyncTime(new Date().toISOString());\r\n        }\r\n      }\r\n    } catch (error) {\r\n      // Silently fail background sync to avoid disrupting user experience\r\n      console.warn('Background notes sync failed:', error.message);\r\n    }\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n    if (errors[name]) {\r\n      setErrors(prev => ({\r\n        ...prev,\r\n        [name]: ''\r\n      }));\r\n    }\r\n  };\r\n\r\n  const validateForm = () => {\r\n    const newErrors = {};\r\n    \r\n    if (!formData.title.trim()) {\r\n      newErrors.title = 'Title is required';\r\n    }\r\n    \r\n    if (!formData.subject.trim()) {\r\n      newErrors.subject = 'Subject is required';\r\n    }\r\n    \r\n    if (!formData.dueDate) {\r\n      newErrors.dueDate = 'Due date is required';\r\n    } else {\r\n      const selectedDate = new Date(formData.dueDate);\r\n      const today = new Date();\r\n      today.setHours(0, 0, 0, 0);\r\n      \r\n      if (selectedDate < today) {\r\n        newErrors.dueDate = 'Due date cannot be in the past';\r\n      }\r\n    }\r\n    \r\n    if (formData.estimatedHours < 0.5 || formData.estimatedHours > 100) {\r\n      newErrors.estimatedHours = 'Estimated hours must be between 0.5 and 100';\r\n    }\r\n    \r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (!validateForm()) {\r\n      return;\r\n    }\r\n\r\n    const taskData = {\r\n      ...formData,\r\n      dueDate: new Date(formData.dueDate).toISOString(),\r\n      estimatedHours: parseFloat(formData.estimatedHours)\r\n    };\r\n\r\n    let result;\r\n    if (task) {\r\n      result = await updateTask(task._id, taskData);\r\n    } else {\r\n      result = await createTask(taskData);\r\n    }\r\n\r\n    if (result.success) {\r\n      onTaskSaved();\r\n    }\r\n  };\r\n\r\n  const handleCreateNote = async () => {\r\n    if (!task || !noteFormData.title.trim()) return;\r\n\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const response = await fetch('/api/notes', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({\r\n          taskId: task._id,\r\n          template: noteFormData.template,\r\n          title: noteFormData.title,\r\n          content: noteFormData.content\r\n        })\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setNotes(prev => [data.data, ...prev]);\r\n        setNoteFormVisible(false);\r\n        setNoteFormData({ title: '', content: '', template: 'blank' });\r\n        setSelectedNote(data.data);\r\n        setLastSyncTime(new Date().toISOString());\r\n      }\r\n    } catch (error) {\r\n      console.error('Error creating note:', error);\r\n    }\r\n  };\r\n\r\n  const handleUpdateNote = async (noteId, updatedData) => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const response = await fetch(`/api/notes/${noteId}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify(updatedData)\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setNotes(prev => prev.map(note => \r\n          note._id === noteId ? data.data : note\r\n        ));\r\n        setSelectedNote(data.data);\r\n        setLastSyncTime(new Date().toISOString());\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating note:', error);\r\n    }\r\n  };\r\n\r\n  const handleDeleteNote = async (noteId) => {\r\n    if (!window.confirm('Are you sure you want to delete this note?')) return;\r\n\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const response = await fetch(`/api/notes/${noteId}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n\r\n      if (response.ok) {\r\n        setNotes(prev => prev.filter(note => note._id !== noteId));\r\n        if (selectedNote && selectedNote._id === noteId) {\r\n          setSelectedNote(null);\r\n        }\r\n        setLastSyncTime(new Date().toISOString());\r\n      }\r\n    } catch (error) {\r\n      console.error('Error deleting note:', error);\r\n    }\r\n  };\r\n\r\n  const renderDetailsTab = () => (\r\n    <form onSubmit={handleSubmit} className=\"task-form\">\r\n      <div className=\"form-group\">\r\n        <label className=\"form-label\">\r\n          <Book size={16} />\r\n          Task Title *\r\n        </label>\r\n        <input\r\n          type=\"text\"\r\n          name=\"title\"\r\n          value={formData.title}\r\n          onChange={handleChange}\r\n          className=\"form-input\"\r\n          placeholder=\"Enter task title\"\r\n        />\r\n        {errors.title && <div className=\"error-message\">{errors.title}</div>}\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label className=\"form-label\">Description</label>\r\n        <textarea\r\n          name=\"description\"\r\n          value={formData.description}\r\n          onChange={handleChange}\r\n          className=\"form-input\"\r\n          placeholder=\"Enter task description (optional)\"\r\n          rows=\"3\"\r\n        />\r\n      </div>\r\n\r\n      <div className=\"form-row\">\r\n        <div className=\"form-group\">\r\n          <label className=\"form-label\">Subject *</label>\r\n          <input\r\n            type=\"text\"\r\n            name=\"subject\"\r\n            value={formData.subject}\r\n            onChange={handleChange}\r\n            className=\"form-input\"\r\n            placeholder=\"e.g., Mathematics, History\"\r\n          />\r\n          {errors.subject && <div className=\"error-message\">{errors.subject}</div>}\r\n        </div>\r\n\r\n        <div className=\"form-group\">\r\n          <label className=\"form-label\">Type</label>\r\n          <select\r\n            name=\"type\"\r\n            value={formData.type}\r\n            onChange={handleChange}\r\n            className=\"form-select\"\r\n          >\r\n            <option value=\"assignment\">Assignment</option>\r\n            <option value=\"exam\">Exam</option>\r\n            <option value=\"project\">Project</option>\r\n            <option value=\"reading\">Reading</option>\r\n            <option value=\"other\">Other</option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"form-row\">\r\n        <div className=\"form-group\">\r\n          <label className=\"form-label\">Priority</label>\r\n          <select\r\n            name=\"priority\"\r\n            value={formData.priority}\r\n            onChange={handleChange}\r\n            className=\"form-select\"\r\n          >\r\n            <option value=\"low\">Low</option>\r\n            <option value=\"medium\">Medium</option>\r\n            <option value=\"high\">High</option>\r\n          </select>\r\n        </div>\r\n\r\n        <div className=\"form-group\">\r\n          <label className=\"form-label\">Status</label>\r\n          <select\r\n            name=\"status\"\r\n            value={formData.status}\r\n            onChange={handleChange}\r\n            className=\"form-select\"\r\n          >\r\n            <option value=\"pending\">Pending</option>\r\n            <option value=\"in-progress\">In Progress</option>\r\n            <option value=\"completed\">Completed</option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"form-row\">\r\n        <div className=\"form-group\">\r\n          <label className=\"form-label\">\r\n            <Calendar size={16} />\r\n            Due Date *\r\n          </label>\r\n          <input\r\n            type=\"date\"\r\n            name=\"dueDate\"\r\n            value={formData.dueDate}\r\n            onChange={handleChange}\r\n            className=\"form-input\"\r\n            min={format(new Date(), 'yyyy-MM-dd')}\r\n          />\r\n          {errors.dueDate && <div className=\"error-message\">{errors.dueDate}</div>}\r\n        </div>\r\n\r\n        <div className=\"form-group\">\r\n          <label className=\"form-label\">\r\n            <Clock size={16} />\r\n            Time\r\n          </label>\r\n          <input\r\n            type=\"time\"\r\n            name=\"dueTime\"\r\n            value={formData.dueTime}\r\n            onChange={handleChange}\r\n            className=\"form-input\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"form-group\">\r\n          <label className=\"form-label\">Hours</label>\r\n          <input\r\n            type=\"number\"\r\n            name=\"estimatedHours\"\r\n            value={formData.estimatedHours}\r\n            onChange={handleChange}\r\n            className=\"form-input\"\r\n            min=\"0.5\"\r\n            max=\"100\"\r\n            step=\"0.5\"\r\n          />\r\n          {errors.estimatedHours && <div className=\"error-message\">{errors.estimatedHours}</div>}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"form-actions\">\r\n        <button\r\n          type=\"submit\"\r\n          className=\"btn btn-primary\"\r\n          disabled={loading}\r\n        >\r\n          <Save size={16} />\r\n          {task ? 'Update Task' : 'Create Task'}\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          onClick={onClose}\r\n          className=\"btn btn-secondary\"\r\n          disabled={loading}\r\n        >\r\n          Cancel\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n\r\n  const renderNotesTab = () => (\r\n    <div className=\"notes-container\">\r\n      <div className=\"notes-sidebar\">\r\n        <div className=\"notes-header\">\r\n          <h3>Notes</h3>\r\n          <div>\r\n            <button\r\n              onClick={() => setNoteFormVisible(true)}\r\n              className=\"btn btn-primary btn-sm\"\r\n              disabled={!task}\r\n            >\r\n              <Plus size={16} />\r\n              Add Note\r\n            </button>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"notes-list\">\r\n          {notes.length === 0 ? (\r\n            <div className=\"notes-empty\">\r\n              <FileText size={32} />\r\n              <p>No notes yet</p>\r\n              {task && (\r\n                <button\r\n                  onClick={() => setNoteFormVisible(true)}\r\n                  className=\"btn btn-outline\"\r\n                >\r\n                  Create your first note\r\n                </button>\r\n              )}\r\n            </div>\r\n          ) : (\r\n            notes.map(note => (\r\n              <div\r\n                key={note._id}\r\n                className={`note-item ${selectedNote?._id === note._id ? 'active' : ''}`}\r\n                onClick={() => setSelectedNote(note)}\r\n              >\r\n                <h4>{note.title}</h4>\r\n                <p>{note.content.substring(0, 100)}...</p>\r\n                <span className=\"note-date\">\r\n                  {format(new Date(note.updatedAt), 'MMM d, yyyy')}\r\n                </span>\r\n              </div>\r\n            ))\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"notes-content\">\r\n        {selectedNote ? (\r\n          <NoteEditor\r\n            note={selectedNote}\r\n            onSave={handleUpdateNote}\r\n            onDelete={handleDeleteNote}\r\n          />\r\n        ) : (\r\n          <div className=\"notes-placeholder\">\r\n            <FileText size={48} />\r\n            <h3>Select a note to view</h3>\r\n            <p>Choose a note from the sidebar to start reading or editing.</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Note Creation Modal */}\r\n      {noteFormVisible && (\r\n        <div className=\"note-form-modal\">\r\n          <div className=\"note-form-content\">\r\n            <div className=\"note-form-header\">\r\n              <h3>Create New Note</h3>\r\n              <button onClick={() => setNoteFormVisible(false)}>\r\n                <X size={20} />\r\n              </button>\r\n            </div>\r\n            \r\n            <div className=\"note-form-body\">\r\n              <div className=\"form-group\">\r\n                <label>Template</label>\r\n                <select\r\n                  value={noteFormData.template}\r\n                  onChange={(e) => setNoteFormData(prev => ({\r\n                    ...prev,\r\n                    template: e.target.value\r\n                  }))}\r\n                  className=\"form-select\"\r\n                >\r\n                  {noteTemplates.map(template => (\r\n                    <option key={template.id} value={template.id}>\r\n                      {template.name}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n                <small>\r\n                  {noteTemplates.find(t => t.id === noteFormData.template)?.description}\r\n                </small>\r\n              </div>\r\n\r\n              <div className=\"form-group\">\r\n                <label>Note Title *</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={noteFormData.title}\r\n                  onChange={(e) => setNoteFormData(prev => ({\r\n                    ...prev,\r\n                    title: e.target.value\r\n                  }))}\r\n                  className=\"form-input\"\r\n                  placeholder=\"Enter note title\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"note-form-actions\">\r\n                <button\r\n                  onClick={handleCreateNote}\r\n                  className=\"btn btn-primary\"\r\n                  disabled={!noteFormData.title.trim()}\r\n                >\r\n                  Create Note\r\n                </button>\r\n                <button\r\n                  onClick={() => setNoteFormVisible(false)}\r\n                  className=\"btn btn-secondary\"\r\n                >\r\n                  Cancel\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"task-detail-modal-overlay\">\r\n      <div className=\"task-detail-modal\">\r\n        <div className=\"modal-header\">\r\n          <h2>{task ? 'Task Details' : 'Create New Task'}</h2>\r\n          <button onClick={onClose} className=\"close-button\">\r\n            <X size={20} />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"modal-tabs\">\r\n          <button\r\n            className={`tab-button ${activeTab === 'details' ? 'active' : ''}`}\r\n            onClick={() => setActiveTab('details')}\r\n          >\r\n            <Book size={16} />\r\n            Details\r\n          </button>\r\n          {task && (\r\n            <button\r\n              className={`tab-button ${activeTab === 'notes' ? 'active' : ''}`}\r\n              onClick={() => setActiveTab('notes')}\r\n            >\r\n              <FileText size={16} />\r\n              Notes\r\n              {notes.length > 0 && (\r\n                <span className=\"tab-badge\">{notes.length}</span>\r\n              )}\r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"modal-content\">\r\n          {activeTab === 'details' ? renderDetailsTab() : renderNotesTab()}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Simple Note Editor Component\r\nconst NoteEditor = ({ note, onSave, onDelete }) => {\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [title, setTitle] = useState(note.title);\r\n  const [content, setContent] = useState(note.content);\r\n\r\n  const handleSave = () => {\r\n    onSave(note._id, { title, content });\r\n    setIsEditing(false);\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setTitle(note.title);\r\n    setContent(note.content);\r\n    setIsEditing(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"note-editor\">\r\n      <div className=\"note-editor-header\">\r\n        {isEditing ? (\r\n          <input\r\n            type=\"text\"\r\n            value={title}\r\n            onChange={(e) => setTitle(e.target.value)}\r\n            className=\"note-title-input\"\r\n          />\r\n        ) : (\r\n          <h3>{note.title}</h3>\r\n        )}\r\n        \r\n        <div className=\"note-editor-actions\">\r\n          {isEditing ? (\r\n            <>\r\n              <button onClick={handleSave} className=\"btn btn-primary btn-sm\">\r\n                <Save size={16} />\r\n                Save\r\n              </button>\r\n              <button onClick={handleCancel} className=\"btn btn-secondary btn-sm\">\r\n                Cancel\r\n              </button>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <button onClick={() => setIsEditing(true)} className=\"btn btn-outline btn-sm\">\r\n                <Edit3 size={16} />\r\n                Edit\r\n              </button>\r\n              <button \r\n                onClick={() => onDelete(note._id)} \r\n                className=\"btn btn-danger btn-sm\"\r\n              >\r\n                <X size={16} />\r\n                Delete\r\n              </button>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"note-editor-content\">\r\n        {isEditing ? (\r\n          <textarea\r\n            value={content}\r\n            onChange={(e) => setContent(e.target.value)}\r\n            className=\"note-content-editor\"\r\n            rows=\"20\"\r\n            placeholder=\"Write your notes here... (Markdown supported)\"\r\n          />\r\n        ) : (\r\n          <div className=\"note-content-display\">\r\n            <pre>{content}</pre>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TaskDetailModal; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}